import{_ as Y,d as q,c as w,o as g,a as t,b as D,t as h,r as A,e as X,n as Z,f as Q,w as K,g as tt,h as f,i as _,I as et,j as ot,k as st,l as nt,m as at,p as it,q as rt,s as lt,u as dt,v as ct,x as V,y as b,z as W,A as B}from"./index-kzrcPye1.js";import{C as ut,u as G,i as pt,L as J}from"./apexcharts.esm-D-nivPEQ.js";const vt=q({name:"DownloadsChart",props:{data:{type:Array,required:!0},currentValue:{type:Number,required:!0}},setup(o){const e=A(null);let j;const k=()=>{if(!e.value)return;e.value.innerHTML="";const M=e.value.clientWidth,y=e.value.clientHeight;if(M===0||y===0)return;const S=Math.max(...o.data.map(c=>c.value))*1.1,x=M/o.data.length-8,L=4,d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("width",M),d.setAttribute("height",y),d.style.overflow="visible";const F=document.createElementNS("http://www.w3.org/2000/svg","g");o.data.forEach((c,u)=>{const p=c.value/S*y,$=u*(x+L*2),m=y-p,I="gradient-".concat(u),s=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");s.setAttribute("id",I),s.setAttribute("x1","0%"),s.setAttribute("y1","0%"),s.setAttribute("x2","0%"),s.setAttribute("y2","100%");const C=document.createElementNS("http://www.w3.org/2000/svg","stop");C.setAttribute("offset","0%"),C.setAttribute("stop-color","rgba(240, 138, 36, 0.9)");const O=document.createElementNS("http://www.w3.org/2000/svg","stop");O.setAttribute("offset","100%"),O.setAttribute("stop-color","rgba(240, 138, 36, 0.3)"),s.appendChild(C),s.appendChild(O);const N=document.createElementNS("http://www.w3.org/2000/svg","defs");N.appendChild(s),d.appendChild(N);const n=document.createElementNS("http://www.w3.org/2000/svg","rect");if(n.setAttribute("x",$),n.setAttribute("y",m),n.setAttribute("width",x),n.setAttribute("height",p),n.setAttribute("rx","4"),n.setAttribute("ry","4"),n.setAttribute("fill","url(#".concat(I,")")),n.addEventListener("mouseover",r=>{const i=document.createElement("div");i.className="chart-tooltip",i.textContent="".concat(c.month,": ").concat(c.value," descargas"),i.style.position="absolute",i.style.left="".concat(r.pageX,"px"),i.style.top="".concat(r.pageY-30,"px"),i.style.backgroundColor="rgba(0, 0, 0, 0.8)",i.style.color="#fff",i.style.padding="5px 10px",i.style.borderRadius="4px",i.style.fontSize="12px",i.style.zIndex="1000",i.style.pointerEvents="none",document.body.appendChild(i),n.addEventListener("mousemove",U=>{i.style.left="".concat(U.pageX+10,"px"),i.style.top="".concat(U.pageY-30,"px")}),n.addEventListener("mouseout",()=>{document.body.removeChild(i)})}),F.appendChild(n),u%2===0){const r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("x",$+x/2),r.setAttribute("y",y+15),r.setAttribute("text-anchor","middle"),r.setAttribute("fill","#aaa"),r.setAttribute("font-size","10px"),r.textContent=c.month,d.appendChild(r)}});for(let c=0;c<=4;c++){const u=y-y*(c/4),p=document.createElementNS("http://www.w3.org/2000/svg","line");p.setAttribute("x1","0"),p.setAttribute("y1",u),p.setAttribute("x2",M),p.setAttribute("y2",u),p.setAttribute("stroke","rgba(255, 255, 255, 0.1)"),p.setAttribute("stroke-width","1"),d.appendChild(p);const $=Math.round(S*(c/4)),m=document.createElementNS("http://www.w3.org/2000/svg","text");m.setAttribute("x","-5"),m.setAttribute("y",u+4),m.setAttribute("text-anchor","end"),m.setAttribute("fill","#aaa"),m.setAttribute("font-size","10px"),m.textContent=$,d.appendChild(m)}d.appendChild(F),e.value.appendChild(d)};return X(async()=>{await Z(),k(),j=new ResizeObserver(k),e.value&&j.observe(e.value),window.addEventListener("resize",k)}),Q(()=>{j&&j.disconnect(),window.removeEventListener("resize",k)}),K(()=>o.data,()=>{k()},{deep:!0}),{chartContainer:e}}}),bt={class:"chart-container"},ht={class:"kpi-value"},ft={ref:"chartContainer",class:"chart-wrapper"};function gt(o,e,j,k,M,y){return g(),w("div",bt,[e[1]||(e[1]=t("h3",null,"Número de descargas",-1)),t("div",ht,[D(h(o.currentValue),1),e[0]||(e[0]=t("span",{class:"unit"},"descargas",-1))]),t("div",ft,null,512)])}const mt=Y(vt,[["render",gt],["__scopeId","data-v-fe18155a"]]),wt=q({name:"NegocioPage",components:{IonPage:ct,IonHeader:dt,IonToolbar:lt,IonTitle:rt,IonContent:it,IonGrid:at,IonRow:nt,IonCol:st,IonButtons:ot,IonMenuButton:et,DownloadsChart:mt},setup(){const o=A(null),e=A(null),j=A(null),k=A(null),M=A(12458),y=A(4.7),S=A(3245),x=A(8.3),L=A(427),d=A(null),F=V(()=>M.value>=15e3),c=V(()=>y.value>4.5),u=V(()=>S.value>=3500),p=V(()=>L.value>=500&&!0),$=E=>{d.value=E},m=()=>{d.value=null},I=A([{month:"Ene",value:850},{month:"Feb",value:740},{month:"Mar",value:900},{month:"Abr",value:1200},{month:"May",value:1350},{month:"Jun",value:1500},{month:"Jul",value:1650},{month:"Ago",value:1800},{month:"Sep",value:1950},{month:"Oct",value:2100},{month:"Nov",value:2250},{month:"Dic",value:2400}]);let s=null,C=null,O=null,N=null;const n=[3150,3220,3180,3250,3190,3245],r=[],i=()=>{r.length=0;const E=new Date;for(let v=5;v>=0;v--){const l=new Date(E.getTime()-v*5*6e4),a="".concat(l.getHours(),":").concat(l.getMinutes().toString().padStart(2,"0"));r.push(a)}},U=()=>{if(s){const E=n[n.length-1],v=new Date,l=v.getHours();let a=0;l>=17&&l<23?a=15:l<8?a=-10:a=5;const R=Math.random();let z;R<.2?z=Math.floor(Math.random()*-80)-30:R<.4?z=Math.floor(Math.random()*80)+30:z=Math.floor(Math.random()*40)-20;const T=Math.max(3e3,Math.min(3500,E+a+z));S.value=T;const H=12;n.push(T),n.length>H&&n.shift();const P="".concat(v.getHours(),":").concat(v.getMinutes().toString().padStart(2,"0"));r.push(P),r.length>H&&r.shift(),s.updateSeries([{data:n}]),s.updateOptions({xaxis:{categories:r},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}}})}};return X(()=>{setTimeout(()=>{if(o.value){const v=o.value.getContext("2d"),l={labels:["Diseño","Accesibilidad","Eficiencia","Usabilidad"],datasets:[{label:"Evaluación",data:[4.8,4.2,4.9,4.6],backgroundColor:"rgba(240, 138, 36, 0.3)",borderColor:"rgba(240, 138, 36, 0.8)",borderWidth:3,pointBackgroundColor:"rgba(240, 138, 36, 1)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8,pointHoverBackgroundColor:"rgba(240, 138, 36, 1)",pointHoverBorderColor:"#fff",pointHoverBorderWidth:3}]};new ut(v,{type:"radar",data:l,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#F08A24",borderWidth:1,callbacks:{label:function(a){return"".concat(a.label,": ").concat(a.parsed.r,"/5")}}}},scales:{r:{beginAtZero:!0,min:0,max:5,ticks:{stepSize:1,color:"#666",backdropColor:"transparent",font:{size:10}},grid:{color:"rgba(255, 255, 255, 0.2)",lineWidth:1},angleLines:{color:"rgba(255, 255, 255, 0.2)",lineWidth:1},pointLabels:{color:"#ccc",font:{size:12,weight:"500"},padding:15}}},elements:{line:{tension:.1}},animation:{duration:1500,easing:"easeInOutQuart"}}})}if(i(),e.value){n.length=0;const v=3200;for(let a=0;a<12;a++){const R=Math.floor(Math.random()*300)-150;n.push(v+R)}const l={series:[{name:"Usuarios activos",data:n}],chart:{type:"area",height:"100%",toolbar:{show:!1},background:"transparent",foreColor:"#aaa",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},colors:["#F08A24"],stroke:{curve:"smooth",width:3},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.2,stops:[0,90,100]}},dataLabels:{enabled:!1},markers:{size:4,colors:["#F08A24"],strokeColors:"#fff",strokeWidth:2,hover:{size:6}},xaxis:{categories:r,labels:{style:{colors:"#aaa"},rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,maxHeight:50},tooltip:{enabled:!1}},yaxis:{labels:{style:{colors:"#aaa"},formatter:function(a){return a.toFixed(0)}},min:3e3,max:3500,tickAmount:5},grid:{borderColor:"rgba(255, 255, 255, 0.1)",padding:{top:0,right:10,bottom:0,left:10},xaxis:{lines:{show:!1}}},tooltip:{theme:"dark",x:{show:!0},y:{formatter:function(a){return a.toFixed(0)+" usuarios"}},marker:{show:!0}},responsive:[{breakpoint:576,options:{chart:{height:"200px"},markers:{size:3}}}]};s=new G(e.value,l),s.render(),i(),U()}if(j.value){C=pt(j.value);const v=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct"],l=[5.2,5.5,5.8,6.2,6.5,6.8,7.2,7.5,7.9,8.3],a=7,R={tooltip:{trigger:"axis",backgroundColor:"rgba(0, 0, 0, 0.8)",borderColor:"#F08A24",borderWidth:1,textStyle:{color:"#fff"},formatter:function(z){const T=z[0],P=T.value>=a?"✅ Objetivo superado":"⚠️ Por debajo del objetivo";return"".concat(T.name,": ").concat(T.value,"%<br/>\n                        Objetivo: ").concat(a,"%<br/>\n                        ").concat(P)}},grid:{top:20,right:30,bottom:40,left:50,containLabel:!0},xAxis:{type:"value",min:0,max:10,axisLine:{lineStyle:{color:"rgba(255, 255, 255, 0.2)"}},splitLine:{lineStyle:{color:"rgba(255, 255, 255, 0.1)"}},axisLabel:{color:"#aaa",fontSize:11,formatter:"{value}%"}},yAxis:{type:"category",data:v,axisLine:{lineStyle:{color:"rgba(255, 255, 255, 0.2)"}},axisTick:{show:!1},axisLabel:{color:"#aaa",fontSize:11,margin:8}},series:[{name:"Tasa de conversión",type:"bar",data:l.map((z,T)=>({value:z,itemStyle:{color:z>=a?new J(0,0,1,0,[{offset:0,color:"#F08A24"},{offset:1,color:"#FFB366"}]):new J(0,0,1,0,[{offset:0,color:"#FF6B6B"},{offset:1,color:"#FF8E8E"}])}})),barWidth:"60%",label:{show:!0,position:"right",color:"#fff",fontSize:11,fontWeight:"bold",formatter:"{c}%"},markLine:{silent:!0,lineStyle:{color:"#F08A24",type:"dashed",width:2},label:{show:!0,position:"end",formatter:"Objetivo: 7%",color:"#F08A24",fontSize:11,fontWeight:"bold"},data:[{xAxis:a}]}}],animation:!0,animationDuration:1e3,animationEasing:"cubicOut"};C.setOption(R)}if(k.value){const v={series:[90,10],chart:{type:"donut",height:"100%",toolbar:{show:!1},background:"transparent"},labels:["Positivo","Negativo"],colors:["#F08A24","#FF4560"],plotOptions:{pie:{donut:{size:"55%",labels:{show:!0,name:{show:!0,fontSize:"14px",fontWeight:600,color:"#fff",offsetY:-10},value:{show:!0,fontSize:"16px",fontWeight:400,color:"#fff",offsetY:5,formatter:function(l){return l+"%"}},total:{show:!0,label:"Total",fontSize:"14px",fontWeight:600,color:"#fff",formatter:function(){return"427"}}}}}},dataLabels:{enabled:!1},legend:{position:"bottom",horizontalAlign:"center",fontSize:"12px",labels:{colors:"#aaa"},markers:{width:12,height:12,radius:12},itemMargin:{horizontal:10,vertical:0}},stroke:{width:0},tooltip:{theme:"dark",y:{formatter:function(l){return l+"%"}}}};O=new G(k.value,v),O.render()}const E=()=>{C&&C.resize(),s&&s.render(),O&&O.render()};window.addEventListener("resize",E),N=setInterval(U,2e3)},300)}),Q(()=>{N&&clearInterval(N),C&&C.dispose(),s&&s.destroy(),O&&O.destroy(),window.removeEventListener("resize",()=>{})}),{totalDownloads:M,averageRating:y,activeUsers:S,conversionRate:x,feedbackResponses:L,downloadsData:I,ratingChart:o,activeUsersChart:e,conversionChart:j,feedbackChart:k,tooltipVisible:d,isDownloadsObjectiveMet:F,isRatingObjectiveMet:c,isUsersObjectiveMet:u,isFeedbackObjectiveMet:p,showObjectiveTooltip:$,hideObjectiveTooltip:m}}}),yt={class:"dashboard-container"},At={class:"dashboard-card"},kt={class:"chart-container-with-objective"},_t={key:0,class:"icon-success"},jt={key:1,class:"icon-pending"},Ct={key:0,class:"objective-tooltip"},Ot={class:"tooltip-content"},Mt={class:"dashboard-card"},zt={class:"chart-container-with-objective"},St={key:0,class:"icon-success"},$t={key:1,class:"icon-pending"},xt={key:0,class:"objective-tooltip"},Et={class:"tooltip-content"},Tt={class:"chart-container"},Lt={class:"kpi-value"},Ft={class:"chart-wrapper"},It={ref:"ratingChart"},Nt={class:"dashboard-card"},Rt={class:"chart-container-with-objective"},Dt={key:0,class:"icon-success"},Ut={key:1,class:"icon-pending"},Vt={key:0,class:"objective-tooltip"},Wt={class:"tooltip-content"},Bt={class:"chart-container"},Ht={class:"kpi-value"},Pt={class:"chart-wrapper"},Gt={ref:"activeUsersChart"},Jt={class:"dashboard-card"},Yt={class:"chart-container"},qt={class:"kpi-value"},Xt={ref:"conversionChart",class:"echarts-container"},Qt={class:"dashboard-card"},Zt={class:"chart-container-with-objective"},Kt={key:0,class:"icon-success"},te={key:1,class:"icon-pending"},ee={key:0,class:"objective-tooltip"},oe={class:"tooltip-content"},se={class:"chart-container"},ne={class:"kpi-value"},ae={class:"chart-wrapper"},ie={ref:"feedbackChart"};function re(o,e,j,k,M,y){const S=_("ion-menu-button"),x=_("ion-buttons"),L=_("ion-title"),d=_("ion-toolbar"),F=_("ion-header"),c=_("downloads-chart"),u=_("ion-col"),p=_("ion-row"),$=_("ion-grid"),m=_("ion-content"),I=_("ion-page");return g(),tt(I,null,{default:f(()=>[b(F,{translucent:!0},{default:f(()=>[b(d,{class:"dark-toolbar"},{default:f(()=>[b(x,{slot:"start"},{default:f(()=>[b(S,{color:"light"})]),_:1}),b(L,null,{default:f(()=>e[8]||(e[8]=[D("🚀 Negocio")])),_:1})]),_:1})]),_:1}),b(m,{class:"dark-content"},{default:f(()=>[t("div",yt,[b($,null,{default:f(()=>[b(p,null,{default:f(()=>[b(u,{size:"12","size-md":"6","size-lg":"4"},{default:f(()=>[t("div",At,[t("div",kt,[t("div",{class:"objective-icon",onMouseenter:e[0]||(e[0]=s=>o.showObjectiveTooltip("downloads")),onMouseleave:e[1]||(e[1]=(...s)=>o.hideObjectiveTooltip&&o.hideObjectiveTooltip(...s))},[o.isDownloadsObjectiveMet?(g(),w("span",_t,"✅")):(g(),w("span",jt,"⏳"))],32),o.tooltipVisible==="downloads"?(g(),w("div",Ct,[t("div",Ot,[e[9]||(e[9]=t("strong",null,"Objetivo: 15.000 finales de año",-1)),t("div",null,"Actual: "+h(o.totalDownloads.toLocaleString()),1),t("div",null,"Restante: "+h((15e3-o.totalDownloads).toLocaleString()),1),t("div",{class:B(o.isDownloadsObjectiveMet?"status-success":"status-pending")},h(o.isDownloadsObjectiveMet?"✅ Objetivo cumplido":"⏳ En progreso"),3)])])):W("",!0),b(c,{data:o.downloadsData,"current-value":o.totalDownloads},null,8,["data","current-value"])])])]),_:1}),b(u,{size:"12","size-md":"6","size-lg":"4"},{default:f(()=>[t("div",Mt,[t("div",zt,[t("div",{class:"objective-icon",onMouseenter:e[2]||(e[2]=s=>o.showObjectiveTooltip("rating")),onMouseleave:e[3]||(e[3]=(...s)=>o.hideObjectiveTooltip&&o.hideObjectiveTooltip(...s))},[o.isRatingObjectiveMet?(g(),w("span",St,"✅")):(g(),w("span",$t,"⏳"))],32),o.tooltipVisible==="rating"?(g(),w("div",xt,[t("div",Et,[e[10]||(e[10]=t("strong",null,"Objetivo: Valoración > 4.5",-1)),t("div",null,"Actual: "+h(o.averageRating)+"/5",1),t("div",{class:B(o.isRatingObjectiveMet?"status-success":"status-pending")},h(o.isRatingObjectiveMet?"✅ Objetivo cumplido":"⏳ Necesita mejorar"),3)])])):W("",!0),t("div",Tt,[e[12]||(e[12]=t("h3",null,"Evaluación de la App",-1)),t("div",Lt,[D(h(o.averageRating),1),e[11]||(e[11]=t("span",{class:"unit"},"/5",-1))]),t("div",Ft,[t("canvas",It,null,512)]),e[13]||(e[13]=t("div",{class:"rating-legend"},[t("div",{class:"legend-item"},[t("span",{class:"legend-color",style:{"background-color":"rgba(240, 138, 36, 0.8)"}}),t("span",null,"Puntuación actual")])],-1))])])])]),_:1}),b(u,{size:"12","size-md":"6","size-lg":"4"},{default:f(()=>[t("div",Nt,[t("div",Rt,[t("div",{class:"objective-icon",onMouseenter:e[4]||(e[4]=s=>o.showObjectiveTooltip("users")),onMouseleave:e[5]||(e[5]=(...s)=>o.hideObjectiveTooltip&&o.hideObjectiveTooltip(...s))},[o.isUsersObjectiveMet?(g(),w("span",Dt,"✅")):(g(),w("span",Ut,"⏳"))],32),o.tooltipVisible==="users"?(g(),w("div",Vt,[t("div",Wt,[e[14]||(e[14]=t("strong",null,"Objetivo: 3.500 próximo mes",-1)),t("div",null,"Actual: "+h(o.activeUsers.toLocaleString()),1),t("div",null,"Restante: "+h(Math.max(0,3500-o.activeUsers).toLocaleString()),1),t("div",{class:B(o.isUsersObjectiveMet?"status-success":"status-pending")},h(o.isUsersObjectiveMet?"✅ Objetivo cumplido":"⏳ En progreso"),3)])])):W("",!0),t("div",Bt,[e[16]||(e[16]=t("div",{class:"chart-header"},[t("h3",null,"Usuarios activos en creación de mazos"),t("div",{class:"live-badge"},[t("div",{class:"pulse"}),t("span",null,"En vivo")])],-1)),t("div",Ht,[D(h(o.activeUsers),1),e[15]||(e[15]=t("span",{class:"unit"},"usuarios",-1))]),t("div",Pt,[t("div",Gt,null,512)])])])])]),_:1})]),_:1}),b(p,null,{default:f(()=>[b(u,{size:"12","size-md":"8"},{default:f(()=>[t("div",Jt,[t("div",Yt,[e[18]||(e[18]=t("div",{class:"chart-header"},[t("h3",null,"Evolución de tasa de conversión"),t("div",{class:"conversion-status"},[t("span",{class:"status-indicator success"}),t("span",{class:"status-text"},"Objetivo superado")])],-1)),t("div",qt,[D(h(o.conversionRate),1),e[17]||(e[17]=t("span",{class:"unit"},"%",-1))]),t("div",Xt,null,512)])])]),_:1}),b(u,{size:"12","size-md":"4"},{default:f(()=>[t("div",Qt,[t("div",Zt,[t("div",{class:"objective-icon",onMouseenter:e[6]||(e[6]=s=>o.showObjectiveTooltip("feedback")),onMouseleave:e[7]||(e[7]=(...s)=>o.hideObjectiveTooltip&&o.hideObjectiveTooltip(...s))},[o.isFeedbackObjectiveMet?(g(),w("span",Kt,"✅")):(g(),w("span",te,"⏳"))],32),o.tooltipVisible==="feedback"?(g(),w("div",ee,[t("div",oe,[e[19]||(e[19]=t("strong",null,"Objetivo: 500 respuestas totales",-1)),e[20]||(e[20]=t("strong",null,"Mantener 90% positivas",-1)),t("div",null,"Respuestas: "+h(o.feedbackResponses)+"/500",1),e[21]||(e[21]=t("div",null,"Positivas: 90% (objetivo: 90%)",-1)),t("div",{class:B(o.isFeedbackObjectiveMet?"status-success":"status-pending")},h(o.isFeedbackObjectiveMet?"✅ Objetivo cumplido":"⏳ En progreso"),3)])])):W("",!0),t("div",se,[e[23]||(e[23]=t("h3",null,"Respuestas de feedback",-1)),t("div",ne,[D(h(o.feedbackResponses),1),e[22]||(e[22]=t("span",{class:"unit"},"respuestas",-1))]),t("div",ae,[t("div",ie,null,512)])])])])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})}const ce=Y(wt,[["render",re],["__scopeId","data-v-a8dd91f0"]]);export{ce as default};
